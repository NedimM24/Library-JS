<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
    <div class="top">
        <div class="top-l">
            <h1>Virtual Library</h1>
        </div>
        <dialog id="addBookDialog">
            <form action="">
                <label for="userTitle">Title</label>
                <input type="text" id="title" name="Book Title" required>

                <label for="userAuthor">Author</label>
                <input type="text" id="author" name="Book Author" required>

                <label for="userPages">Page Count</label>
                <input type="number" id="pages" name="Book Pages" required>

                <label for="read">Have you read this book?</label>
                <input type="checkbox" id="read" name="Have Read">
                
                <button value="cancel" formmethod="dialog">Cancel</button>
                <button class="submit">Submit</button>
            </form>
        </dialog>

        <p>
            <button class="top-button">Add book</button>
        </p>
        <output></output>
    </div>


    <div class="bottom">

        <!-- This is where the user created books go -->
       
        
    </div>
</div>

<script>
    
    // Library array where we will store bookes
    const myLibrary = [];

    //Book constructor
    function Book(title, author, pages, isRead){
        this.id = crypto.randomUUID();
        this.title = title;
        this.author = author;
        this.pages = pages;
        this.isRead = isRead;
    }

    //Creates book from aguements and adds the book to the Array
    function addBook(title, author, pages, isRead){
        const newBook = new Book(title, author, pages, isRead);
        myLibrary.push(newBook);
    }

   
    
    const addBookButton = document.querySelector(".top-button");
    const formDialog = document.querySelector("#addBookDialog");
    const submitButton = document.querySelector(".submit");
    
    addBookButton.addEventListener("click", () => {
        formDialog.showModal();
    })

    submitButton.addEventListener("click", function(e) {
        e.preventDefault(); //Preventing the form from submitting normally
        var title = document.getElementById("title").value;
        var author = document.getElementById("author").value;
        var pages = document.getElementById("pages").value;
        var isRead = document.getElementById("read").checked;
        pages = parseInt(pages);

        addBook(title, author, pages, isRead);

        formDialog.close();

        document.getElementById("title").value = '';
        document.getElementById("author").value = '';
        document.getElementById("pages").value = '';
        document.getElementById("read").checked = false;

        displayBook();
    })

    


    //function that loops through array and adds the book to the page
    function displayBook(){

        const container = document.querySelector(".bottom");
        while(container.firstChild){
            container.removeChild(container.firstChild)
        }

    

        //Start to iterate through the array
        myLibrary.forEach((book, index) => {

            
            const contentCard = document.createElement("div");      //Create the book on a content carf
            contentCard.classList.add("content-card");              // Adds the class named "content-card to the div"

            const title = document.createElement("div");            //creating the title div
            title.textContent = `Title - ${book.title}`;
            contentCard.appendChild(title);                         //append the title to the content card

          

            const author = document.createElement("div");
            author.textContent = `Author - ${book.author}`;
            contentCard.appendChild(author);

            const pages = document.createElement("div");
            pages.textContent = `Page Count - ${book.pages}`;
            contentCard.appendChild(pages);

            const deleteButton = document.createElement("button");
            deleteButton.textContent = "Delete";
            deleteButton.classList.add("delete-button");
            contentCard.appendChild(deleteButton);

            //create functionality for the delete button
            deleteButton.addEventListener("click", () => {
                myLibrary.splice(index, 1)
                displayBook();

           
    })

           
            container.appendChild(contentCard);                      //add the content card to the container
            
            

            
    })
    };

   

    </script>
</body>
</html>